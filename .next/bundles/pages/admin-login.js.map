{"version":3,"file":"bundles\\pages\\admin-login.js","sources":["webpack:///./node_modules/isomorphic-unfetch/browser.js","webpack:///./node_modules/next/router.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///pages/admin-login.js"],"sourcesContent":["module.exports = window.fetch || (window.fetch = require('unfetch').default || require('unfetch'));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/isomorphic-unfetch/browser.js\n// module id = ./node_modules/isomorphic-unfetch/browser.js\n// module chunks = 4 6","module.exports = require('./dist/lib/router')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/next/router.js\n// module id = ./node_modules/next/router.js\n// module chunks = 4","module.exports = function(originalModule) {\r\n\tif(!originalModule.webpackPolyfill) {\r\n\t\tvar module = Object.create(originalModule);\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"exports\", {\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/harmony-module.js\n// module id = ./node_modules/webpack/buildin/harmony-module.js\n// module chunks = 4 6","\r\nimport fetch from 'isomorphic-unfetch'\r\nimport React, { Component } from 'react'\r\nimport Router from 'next/router'\r\n\r\n\r\nconst initialState = {\r\n  saving: false,\r\n  save: false,\r\n  user: {\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      image_url: ''\r\n  },\r\n  error: {\r\n      openError: false,\r\n      errMessage: ''\r\n  }\r\n}\r\n\r\nclass AdminLogin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ...initialState,\r\n      loignCode: props.url.query.code\r\n    }  \r\n  }\r\n\r\n  \r\n\r\n\r\n  componentDidMount() {\r\n    if (this.state.loignCode !== undefined) {\r\n        this.setState({saving: true})\r\n        fetch(`https://slack.com/api/oauth.access?client_id=128855814131.364624341426&client_secret=fcffdec17a2d48361b4467356339bc71&code=${this.state.loignCode}`)\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n            if (data.ok) {\r\n             this.saveUserData(data)\r\n            } else {\r\n                this.setState({error: {openError: true, errMessage: data}})\r\n            } \r\n         }\r\n        )\r\n    } else {\r\n        console.log(this.state.loignCode)\r\n    }\r\n  }\r\n\r\n  saveUserData(userReponse) {\r\n      const {user} = userReponse;\r\n      this.setState({user: { \r\n          firstName: user.name.split(' ')[0], \r\n          lastName: user.name.split(' ')[1],\r\n          image_url: user.image_192,\r\n          email: user.email\r\n      }})\r\n    fetch(`/api/update-create/${user.email}`, {\r\n        method: 'post',\r\n        headers: {\r\n          'Accept': 'application/json, text/plain, */*',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(this.state.user)\r\n    })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n        console.log(data);\r\n        this.setState({saving: false, save: true})\r\n        localStorage.setItem('access_token', userReponse.access_token);\r\n        Router.push(`/admin-profile?_id=${data.user._id}`, `/dashboard/profile/${data.user._id}`);\r\n    })\r\n  } \r\n \r\n\r\n  render() {\r\n      const state = this.state;\r\n    return (\r\n    <div>\r\n       <a style={{left: '45%', position: 'absolute', top: '45%'}} href=\"https://slack.com/oauth/authorize?scope=identity.basic,identity.email,identity.team,identity.avatar&client_id=128855814131.364624341426\"><img alt=\"Sign in with Slack\" height=\"40\" width=\"172\" src=\"https://platform.slack-edge.com/img/sign_in_with_slack.png\" srcset=\"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x\" /></a>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default AdminLogin\n\n\n// WEBPACK FOOTER //\n// pages/admin-login.js"],"mappings":";;;;;;;;;AAAA;;;;;;;;ACAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAFA;AATA;AACA;AAcA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAEA;AAFA;AAFA;AAMA;AACA;;;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAMA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAQA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;AA/DA;AACA;AAkEA;AAAA;;;;;;;;;;;;AAlFA;AAeA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}